id: breema_csv_media_audio_file
label: Audio files from CSV input
migration_tags:
  - Breema CSV

destination:
  plugin: entity:file
  urlencode: true
  source_path_property: file_source
  destination_path_property: file_dest

source:
  plugin: csv
  path: 'public://csv/media-audio-files.csv'
  header_row_count: 0
  keys:
    - filename
  column_names:
    0:
      filename: File name
    1:
      created: Created timestamp

process:
  file_source_uri:
    plugin: default_value
    default_value: '/Users/dww/breema/legacy-website/audio'
  file_source:
    plugin: concat
    delimiter: /
    source:
      - '@file_source_uri'
      - filename
  file_dest:
    plugin: breema_audio_file_uri
    source:
      - filename
      - created
  uri:
    plugin: file_copy
    source:
      - '@file_source'
      - '@file_dest'
  filename:
    plugin: callback
    callable: drupal_basename
    source: '@uri'
  created: created
  uid:
    plugin: default_value
    default_value: 1

migration_dependencies:
  required: {}
  optional: {}
